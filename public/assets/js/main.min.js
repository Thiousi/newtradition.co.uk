function hasClass(e,t){return new RegExp(" "+t+" ").test(" "+e.className+" ")}function toggleClass(e,t){var a=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(hasClass(e,t)){for(;a.indexOf(" "+t+" ")>=0;)a=a.replace(" "+t+" "," ");e.className=a.replace(/^\s+|\s+$/g,"")}else e.className+=" "+t}function loadMore(){$.ajax({url:"stream",type:"post",dataType:"json",data:{amount:amount,offset:offset}}).done(function(e){$(btnLoad).before(e[0]),e[1]||$(btnLoad).unbind("click",loader).text("All posts have been loaded").removeClass("btn-load").addClass("btn-load-complete")}),offset+=3*amount+1}window.onload=function(){document.getElementsByTagName("body")[0].className=document.getElementsByTagName("body")[0].className.replace(/(?:^|\s)preload(?!\S)/,"");var e=document.querySelector(".pagination");if(null!==e)for(var t=e.getElementsByTagName("a"),a=0,n=t.length,o=location.href.split("#")[0];n>a;a++)t[a].href.split("#")[0]==o&&(t[a].className+=" active")};var btnMenu=document.querySelector(".btn-menu"),navMenu=document.querySelector(".menu");null!==btnMenu&&btnMenu.addEventListener("click",function(e){toggleClass(this,"active"),toggleClass(navMenu,"active")});var btnShare=document.querySelector(".btn-share");null!==btnShare&&btnShare.addEventListener("click",function(e){toggleClass(this.parentNode,"active")}),"ontouchstart"in document.documentElement&&(document.getElementsByTagName("body")[0].className+=" touch-device");var disqusThread=document.getElementById("disqus_thread"),disqusShortname="newtraditiontest";null!==disqusThread&&!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqusShortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}();var journal=document.querySelector(".journal"),home=document.querySelector(".home"),loader=function(){return loadMore(),!1},btnLoad=document.querySelector(".btn-load");if(null!==btnLoad){$(btnLoad).bind("click",loader);var amount=2,offset=3*amount+1}for(var tagArray=document.getElementsByClassName("tag"),i=tagArray.length-1;i>=0;i--)tagArray[i].innerHTML=tagArray[i].innerHTML.replace(/-/g," ");var journalStream=document.querySelector(".journal-stream");if(null!==journalStream&&(-1!=window.location.href.indexOf("tag:")||window.location.href.indexOf("category:"))){if(-1!=window.location.href.indexOf("tag:"))var tagBtn=document.querySelectorAll(".tag");else var tagBtn=document.querySelectorAll(".cat");for(var url=document.URL,i=0;i<tagBtn.length;i++)tagBtn[i].getAttribute("href")===url&&(tagBtn[i].className+=" active");var tagTitle=document.querySelector(".tag-title"),activeTag=document.querySelector(".sidebar .active");if(null!==tagTitle&&null!==activeTag){tagTitle.textContent=activeTag.textContent,tagTitle.style.display="block";var feature=document.querySelector(".featured");feature.style.display="none"}}if(null!==journalStream&&-1!=window.location.href.indexOf("page:")){var feature=document.querySelector(".featured");feature.style.display="none"}